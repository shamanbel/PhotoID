# Фото-индентификатор

## Описание
Это приложение проверяет фото пользователя при старте Windows и сравнивает его с эталонным фото, сделанным при конфигурации.
В случае несоответствия и наличии интернет соединения программа отправляет фото текущего пользователя и его IP-адрес на email, указанный при конфигурации. 
При отсутствиии интернет соединения программа перейдет в режим ожидания. В котором будет с установленной последовательностью отправлять сообщение. Программа предназначена для использования на ноутбуках(Windows).

## Требования
- Windows 10/11
- Java 17(JRE)
<!-- IntelliJ IDEA (для разработки)
- Maven (для сборки проекта)
- Подключение к интернету (для отправки email)-->



## Установка
1. Скачайте с репозитория папку 

   ```bash
   git clone https://github.com/shamanbel/PhotoID/Photo_identifier_default.git
   
2. Разместите ее в удобном для Вас месте.
3. Запустите "start_Photo_identifier.bat". 

    
При первом запуске программа создаст файл config.properties и запросит ввод следующих данных:
- email.address – email владельца для отправки уведомлений.
- порог соответствия - определяет вероятностную характеристику соответствия фото владельца и пользователя.
- фото владельца - камера сделает фото с которым в последующем будут сравниваться фото пользователей.

Затем программа завершится. 
При повторном и последующих запусках будет использоваться установленная конфигурация. Для ее изменения необходимо удалить папку "src" и заново пройти процесс конфигурирования.

4. Определите автозапуск "start_Photo_identifier.bat" в планировщике задач Windows. Установите следующие настройки:
-   Вкладка "Общие"
    Установите флажок "Выполнять с наивысшими правами" (Run with highest privileges).
-   Вкладка "Триггеры" (Triggers):
    Нажмите "Создать" (New) и выберите "При запуске" (At startup).
    Включите опцию "Задержка задачи" (Delay task) и установите 10 секунд.
-   Вкладка "Действия" (Actions):
    Нажмите "Создать" и выберите "Запуск программы" (Start a program).
    Укажите путь к вашему бат-файлу.
    Укажите путь к рабочей папке приложения.

## Описание 
Алгоритм обработки изображений в представленном коде выполняет две ключевые задачи: 
*   сравнение изображений по их гистограммам;
*   обнаружение лица с помощью каскадных классификаторов.

Сравнение изображений по гистограммам (compareImages):

Преобразование изображений в градации серого: Изначально оба изображения преобразуются в оттенки серого с помощью функции Imgproc.cvtColor. Это упрощает последующее сравнение, так как уменьшается количество информации (без учета цветовой составляющей).

Вычисление гистограммы изображений: Для каждого изображения рассчитывается его гистограмма, которая является распределением интенсивностей пикселей. Используется метод Imgproc.calcHist, который рассчитывает гистограмму по 256 уровням серого.

Сравнение гистограмм: Гистограммы двух изображений сравниваются с использованием метода Imgproc.compareHist. Параметр Imgproc.CV_COMP_CORREL указывает, что для сравнения используется корреляция. Корреляция определяет, насколько сильно две гистограммы похожи друг на друга. Результат сравнения выводится в виде значения схожести.

Оценка схожести: Если коэффициент схожести больше заданного порога (SIMILARITY_THRESHOLD), изображения считаются похожими.

Обнаружение и выделение лица с изображения (detectAndExtractFace):

Загрузка каскада Хаара: Используется каскад Хаара для обнаружения лица. Код загружает файл каскада из ресурсов (в данном случае haarcascade_frontalface_default.xml), сохраняет его во временный файл и загружает в CascadeClassifier.

Обнаружение лиц: Метод detectMultiScale находит на изображении области, содержащие лица, и возвращает массив прямоугольников (MatOfRect), где каждое лицо заключено в прямоугольник.

Извлечение первого найденного лица: Если обнаружено хотя бы одно лицо, выбирается первое найденное и извлекается соответствующая область изображения, содержащая только лицо. Возвращается матрица, которая представляет собой обрезанное изображение лица.
